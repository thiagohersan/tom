<div ng-include="'templates/partials/navbar.html'"></div>

<div ng-include="'templates/partials/error.html'"></div>

<div class="row" ng-show="serverError">
  <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
    <div class="alert alert-danger text-center">
      <p>{{ 'LOADING_ERROR' | translate }}</p>
      <a ng-click="init()" class="btn btn-danger">
        {{ 'LOADING_ERROR_BUTTON' | translate }}
      </a>{{ 'LOADING_ERROR2' | translate }}
    </div>
  </div>
</div>

<div ng-hide="loading || serverError">
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
          <h2 class="title">{{ 'QUESTION1' | translate }}</h2>
          <h2 class="title">{{ 'QUESTION2' | translate }}</h2>
            <div class="square-container">
                <div class="square" ng-click="setWinner(currentDuel.first_trend)">
                    <div class="block" ng-class="{'loading':saving, 'active': isSelected(currentDuel.first_trend)}">
                        <div class="centered">
                            <h1>{{ currentDuel.first_trend.name }}</h1>
                        </div>
                    </div>
                </div>
                <div class="square" ng-click="setWinner(currentDuel.second_trend)">
                    <div class="block" ng-class="{'loading':saving, 'active': isSelected(currentDuel.second_trend)}">
                        <div class="centered">
                            <h1>{{ currentDuel.second_trend.name }}</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
            <div class="info">
                <div class="info-text" ng-show="showTrendInfoBox">
                    <span class="info-title">{{trendInfo.name}}</span>
                    <svg class="info-close" ng-click="showTrendInfo(false)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 279.2 281.5"><circle class="info-close-outer" cx="141.7" cy="142.7" r="124"/><path class="info-close-line" d="M94.6 103.8l86.7 86.7M94.6 190.5l86.7-86.7"/></svg>
                    <p class="info-description">{{trendInfo.description}}</p>
                </div>
                <div class="info-container">
                    <svg ng-click="showTrendInfo(true, currentDuel.first_trend)" xmlns="http://www.w3.org/2000/svg" viewBox="-96 167.9 89.3 89.3">
                        <path d="M-51.3 167.9c-24.7 0-44.7 20-44.7 44.7s20 44.7 44.7 44.7 44.7-20 44.7-44.7-20-44.7-44.7-44.7zm.3 67.8c-.6.6-1.4 1-2.4 1-.9 0-1.7-.3-2.3-.9-.6-.6-.9-1.5-.9-2.8 0-2.5 1.1-3.7 3.3-3.7 1.1 0 1.9.3 2.4 1 .6.6.9 1.6.9 2.7-.1 1.1-.4 2-1 2.7zm9.7-26.9c-.4 1-.9 2-1.6 2.9-.7.9-2.2 2.3-4.5 4.3-1.8 1.6-3 2.9-3.6 3.9-.6 1-.9 2.4-.9 4.1v.9h-3.5v-1.5c0-2.1.3-3.9 1-5.2.7-1.4 1.9-2.8 3.6-4.3 2.5-2.1 4-3.7 4.7-4.7.6-1.1 1-2.3 1-3.8 0-1.9-.6-3.3-1.8-4.3s-2.9-1.5-5.1-1.5c-1.4 0-2.8.2-4.2.5-1.4.3-2.9.9-4.7 1.8l-1.6-3.7c3.4-1.8 7-2.7 10.7-2.7 3.5 0 6.2.9 8.1 2.6s2.9 4.1 2.9 7.2c.1 1.3-.1 2.5-.5 3.5z"/>
                    </svg>
                </div>
                <div class="info-container">
                    <svg ng-click="showTrendInfo(true, currentDuel.second_trend)" xmlns="http://www.w3.org/2000/svg" viewBox="-96 167.9 89.3 89.3">
                        <path d="M-51.3 167.9c-24.7 0-44.7 20-44.7 44.7s20 44.7 44.7 44.7 44.7-20 44.7-44.7-20-44.7-44.7-44.7zm.3 67.8c-.6.6-1.4 1-2.4 1-.9 0-1.7-.3-2.3-.9-.6-.6-.9-1.5-.9-2.8 0-2.5 1.1-3.7 3.3-3.7 1.1 0 1.9.3 2.4 1 .6.6.9 1.6.9 2.7-.1 1.1-.4 2-1 2.7zm9.7-26.9c-.4 1-.9 2-1.6 2.9-.7.9-2.2 2.3-4.5 4.3-1.8 1.6-3 2.9-3.6 3.9-.6 1-.9 2.4-.9 4.1v.9h-3.5v-1.5c0-2.1.3-3.9 1-5.2.7-1.4 1.9-2.8 3.6-4.3 2.5-2.1 4-3.7 4.7-4.7.6-1.1 1-2.3 1-3.8 0-1.9-.6-3.3-1.8-4.3s-2.9-1.5-5.1-1.5c-1.4 0-2.8.2-4.2.5-1.4.3-2.9.9-4.7 1.8l-1.6-3.7c3.4-1.8 7-2.7 10.7-2.7 3.5 0 6.2.9 8.1 2.6s2.9 4.1 2.9 7.2c.1 1.3-.1 2.5-.5 3.5z"/>
                    </svg>
                </div>
                <div class="info-skip text-center">
                  <a class="btn btn-link btn-skip" ng-click="skip()">{{ 'SKIP_DUEL' | translate }} &raquo;</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
            <div class="trend-bar">
                <div class="trend-bar-counter">{{getCurrentPage()}}/{{totalDuels}}</div>
                <div class="bars">
                    <div class="bar" ng-repeat="i in getDuelCount(totalDuels) track by $index" ng-class="{'bar-completed': $index < getCurrentPage()}"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-show="loading" class="text-center">
    <div ng-include="'templates/partials/loading.html'"></div>
</div>
